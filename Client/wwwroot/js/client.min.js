var notyf,overlayScrollbarsUserInstance,overlayScrollbarsChatInstance,emojiArea,chatSectionReference,MathJax,emojione=window.emojione,newMessageCount=0,canSendNotifications=!1,newMessageNotificationCount=1,soundEnabled=!0;function ShowNotification(e,t,n=5e3,o={x:"center",y:"top"},i=!0){null==notyf&&(notyf=new Notyf({types:[{type:"warning",background:"darkorange"},{type:"information",background:"dodgerblue"}]}));let s="";switch(Array.isArray(e)?e.forEach((function(e,t,n){s+=`- ${e} <br />`})):s=e,t){case 1:notyf.success({duration:n,position:o,dismissible:i,message:s,className:"toast-custom-notyf"});break;case 0:notyf.error({duration:n,position:o,dismissible:i,message:s,className:"toast-custom-notyf"});break;case 2:notyf.open({type:"warning",duration:n,position:o,dismissible:i,message:s,className:"toast-custom-notyf"});case 3:notyf.open({type:"information",duration:n,position:o,dismissible:i,message:s,className:"toast-custom-notyf"})}}function FocusElement(e){document.querySelector(e).focus()}function InitializeOS(e,t="os-theme-dark",n){"user"==n?overlayScrollbarsUserInstance=OverlayScrollbars(document.getElementById(e),{className:t,scrollbars:{autoHide:"leave"},overflowBehavior:{x:"hidden"}}):overlayScrollbarsChatInstance=OverlayScrollbars(document.getElementById(e),{className:t,scrollbars:{autoHide:"leave"},overflowBehavior:{x:"hidden"}})}function DestroyOS(e){"user"==e?null!=overlayScrollbarsUserInstance&&overlayScrollbarsUserInstance.destroy():null!=overlayScrollbarsChatInstance&&overlayScrollbarsChatInstance.destroy()}function AddMessage(e){$("#ChatContent .os-content").append(e),MathJax.typeset()}function AddUser(e){$("#UserList").append(e)}function AddUserList(e){$("#UserList").append(e)}function RemoveUser(e){$("#UserList").children(`[data-name='${e}']`).eq(0).remove()}function InitializeEmojis(e,t){null==chatSectionReference&&(chatSectionReference=t),emojiArea=$("#"+e).emojioneArea({standalone:!0,search:!1,autocomplete:!1,attributes:{spellcheck:!1,autocomplete:"off",shortnames:!1,saveEmojisAs:"unicode"},events:{emojibtn_click:function(e,t){let n=$("#MessageTextArea"),o=emojione.shortnameToUnicode(e.data("name"));n.val(n.val()+o),chatSectionReference.invokeMethodAsync("AddEmoji",o)}}})}function ScrollChatSec(e){overlayScrollbarsChatInstance.scroll({y:"100%"},300,{y:"easeOutCubic"})}function SetTitle(e){if(++newMessageCount,null==e){if(!document.hasFocus())return document.title=`(${newMessageCount}) New message`,!1}else document.title=e;newMessageCount=0}function SubscribeToNotifications(){if("Notification"in window)return!function(){try{Notification.requestPermission().then()}catch(e){return!1}return!0}()?Notification.requestPermission((function(e){handlePermission(e)})):Notification.requestPermission().then((e=>{handlePermission(e)})),canSendNotifications;alert("This browser does not support notifications.")}function handlePermission(e){"permission"in Notification||(Notification.permission=e),canSendNotifications="denied"!==Notification.permission&&"default"!==Notification.permission}function CheckNotificationPermission(){return Notification.permission.toString()}function SendNotification(){new Notification("Zen Chat",{body:"You have a new message!",tag:"newMessage"+newMessageNotificationCount,image:"/media/imgassets/new_message.svg"});++newMessageNotificationCount>3&&(newMessageNotificationCount=1)}function AppHasFocus(){return document.hasFocus()}function PlayNotificationSound(){document.getElementById("notify").play()}function PauseNotificationSound(){document.getElementById("notify").pause()}MathJax={options:{skipHtmlTags:["script","noscript","style","textarea","code","annotation","annotation-xml"],includeHtmlTags:{br:"\n",wbr:"","#comment":""}},tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}},$.extend($.easing,{easeInCubic:function(e,t,n,o,i){return o*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,o,i){return o*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,o,i){return(t/=i/2)<1?o/2*t*t*t+n:o/2*((t-=2)*t*t+2)+n}}),$(document).ready((function(){$(document).click((function(e){$(".input-wrapper--text").removeClass("focused");var t=$(e.target);t.parents(".input-wrapper--text").length>0&&t.parents(".input-wrapper--text").eq(0).addClass("focused")})),$(document).on("keypress","#MessageTextArea",(function(e){if(13!=e.which||e.shiftKey||(chatSectionReference.invokeMethodAsync("ValidateAndSubmit"),$("#ChatFooter form").trigger("reset"),e.preventDefault()),0==$(this).val().length&&$(this).css("height","0px"),$(this).height()>=150)return!0;$(this).css("height","0px"),$(this).css("height",$(this)[0].scrollHeight+"px")}))}));